# é›†åˆç±»åž‹åè®®

##  3.2é›†åˆç±»åž‹:Collection
###è¿™ä¸€èŠ‚åªè¦ç›®çš„æ˜¯é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªFIFOçš„é›†åˆåŽ»äº†è§£ä¸€äº›ç»†èŠ‚ã€‚
ç¨³å®šçš„åºåˆ—(å¯```å¤šæ¬¡éåŽ†```ä¸”```ä¿æŒä¸€è‡´```)ï¼Œå¯é€šè¿‡ä¸‹æ ‡èŽ·å–å…¶ä¸­çš„å…ƒç´ ã€‚
#### çŸ¥è¯†ç‚¹1ï¼šCollectionå»ºç«‹åœ¨Sequenceåè®®ä¹‹ä¸Š

#### çŸ¥è¯†ç‚¹2ï¼š```String```ï¼Œ```Data```ï¼Œ```IndexSet```ä¹Ÿå‡†å®ˆäº†Collectionåè®®ã€‚

#### çŸ¥è¯†ç‚¹3ï¼šswiftæ•°ç»„å¯ä»¥å½“åšæ ˆ ç”¨appendå…¥æ ˆï¼ŒpopLastå‡ºæ ˆ
æ³¨ï¼šæ•°ç»„æ˜¯åœ¨è¿žç»­çš„å†…å­˜ä¸­æŒæœ‰å…ƒç´ ï¼Œç§»é™¤éžæœ«å°¾å…ƒç´ æ—¶ï¼ŒåŽé¢çš„å…ƒç´ éƒ½ä¼šç§»åŠ¨å¡«è¡¥ç©ºç™½ï¼Œå¤æ‚åº¦ä¸ºO(n)ã€‚  åšç±»ä¼¼æ“ä½œçš„æ—¶å€™å¯ä»¥ä»Ž```æ€§èƒ½æ–¹é¢```åŽ»è€ƒè™‘ä¸€ä¸‹ã€‚
#### é˜Ÿåˆ—å¯ä»¥ç»“åˆä½¿ç”¨ pushå’Œremove(at:0)


### ä¸ºé˜Ÿåˆ—è®¾è®¡åè®®ï¼šIterator 

    /// è‡ªå·±å†™ä¸€ä¸ªæœ€ç®€å•çš„å°†å…ƒç´ å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„ç±»åž‹
    protocol Queue{
        ///selfä¸­æ‰€æŒæœ‰çš„å…ƒç´ ç±»åž‹
        associatedtype Element
        ///æŠŠnewElement åŠ å…¥é˜Ÿåˆ—
        mutating func enqueue(_ newElement: Element)
        ///ä»Žselfå‡ºé˜Ÿä¸€ä¸ªå…ƒç´ 
        /// è¿”å›žå€¼æ˜¯å¯é€‰å€¼? é˜Ÿåˆ—ä¸ºç©ºæ—¶è¿™æ ·çš„åšæ³•æ˜¯å®‰å…¨çš„
        mutating func dequeue() -> Element?
    }

è¿™å°±è¡¨è¿°äº†```é˜Ÿåˆ—çš„å®šä¹‰```ã€‚


### é˜Ÿåˆ—çš„å®žçŽ°
ä¸‹é¢æˆ‘ä»¬å°†å‡†å®ˆä¸Šé¢çš„Queueåè®®ï¼Œå†™ä¸€ä¸ªFIFO( First Input First Output)é˜Ÿåˆ—

    ///FIFO( First Input First Output)
    struct FIFOQueue:Queue {
        
        fileprivate var left: [Int] = []
        fileprivate var right: [Int] = []
        
        ///æŠŠå…ƒç´ æ·»åŠ åˆ°é˜Ÿå°¾
        /// å¤æ‚åº¦O(1)
        mutating func enqueue(_ newElement: Int) {
            right.append(newElement)
        }
        
        
        /// ä»Žé˜Ÿåˆ—é¦–éƒ¨ç§»é™¤ä¸€ä¸ªå…ƒç´ 
        /// é˜Ÿåˆ—ä¸ºnilæ—¶å€™è¿”å›žç©º
        /// - å¤æ‚åº¦ï¼š å¹³æ‘Š O(1)
        mutating func dequeue() -> Int? {
            if left.isEmpty {
                left = right.reversed()
                right.removeAll()
            }
            return left.popLast()
        }
    }

å…¥é˜Ÿæ·»åŠ åˆ°"å³", 
å‡ºé˜Ÿä»Ž"å³"çš„ååº"å·¦"ä¸­è¢«å¼¹å‡ºã€‚ "å·¦"ä¸ºç©ºæ—¶å†å°†"å³"ååºè®¾ç½®ä¸ºå·¦```(å¥½ç»•ï¼Œä¸å¤ªç†è§£çš„åŒå­¦å¯ä»¥è‡ªå·±çœ‹ç€ä»£ç æŠŠæµç¨‹èµ°èµ°å°±å¾ˆå¿«èƒ½ç†è§£å•¦~)```




### å‡†å®ˆCollectionåè®®
å‰é¢æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªFIFOé˜Ÿåˆ—äº†ï¼Œä¸‹é¢å¯ä»¥ä¸ºå®ƒæ·»åŠ Collectionåè®®å•¦~  åœ¨swift2.0çš„æ—¶å€™Collectionåè®®æœ‰
4ä¸ªå…³è”ç±»åž‹
4ä¸ªå±žæ€§
7ä¸ªå®žä¾‹æ–¹æ³•  
2ä¸ªä¸‹æ ‡æ–¹æ³•

åœ¨swift4.2ä¸­æœ‰ç•¥å¾®æ”¹è¿›ã€‚ã€‚å…·ä½“å¯å‚ç…§[Collection è‹¹æžœå®˜æ–¹æ–‡æ¡£](https://developer.apple.com/documentation/swift/collection)

#### æ˜¯ä¸æ˜¯æœ‰ç‚¹æ…Œã€‚ä¸€å¼€å§‹çœ‹åˆ°çš„æ—¶å€™æˆ‘ä¹Ÿæ…ŒðŸ˜‚ï¼Œå…¶å®žæ æ‰€æœ‰çš„```å…³è”ç±»åž‹éƒ½æœ‰é»˜è®¤å€¼``` é™¤éžä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä¸€èˆ¬ä¸ç”¨å…³å¿ƒçš„ã€‚
ä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹è®©æˆ‘ä»¬çš„FIFOåŽ»éµå®ˆCollectionå§~

    extension FIFOQueue:Collection {

        public var startIndex: Int { return 0 }
        public var endIndex: Int { return left.count + right.count}
        
        public func index(after i: Int) -> Int {
            precondition( i < endIndex)
            return i + 1
        }
        
        public subscript(position: Int) -> Int {
            precondition((0..<endIndex).contains(position),"Index out of bounds")
            if position < left.endIndex{
                return left[left.count - position - 1]
            }else{
                return right[position - left.count]
            }
        }
    }

ä¸‹é¢å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨æˆ‘ä»¬åˆ›å»ºçš„FIFOQueueå•¦~

### éµå®ˆ ExpressibleByArrayLiteralåè®®
ExpressibleByArrayLiteralçš„ä¸»è¦ä½œç”¨æ˜¯å¯ä»¥è®©```å¯¹è±¡æ”¯æŒå­—é¢é‡åˆå§‹åŒ–```
ç¬¬ä¸€æ¬¡çœ‹è¿™ä¸ªåè¯æˆ‘ä¹Ÿä¸€è„¸æ‡µã€‚
```å…¶å®žå°±æ˜¯è®©ä½ çš„é›†åˆå¯ä»¥ç”¨[value1, value2, etc]çš„æ–¹å¼åŽ»åˆ›å»ºã€‚```
    
    extension FIFOQueue:ExpressibleByArrayLiteral{
        ///ExpressibleByArrayLiteral çš„initæ–¹æ³•åŽ»å®žçŽ°ä¸€ä¸‹å°±ok~ 
        init(arrayLiteral elements: Int...) {
            self.init(left: elements.reversed(), right: [])
        }
    }


### å…³è”ç±»åž‹
Iterator æ˜¯ä»ŽSequence ç»§æ‰¿çš„å…³è”ç±»åž‹ã€‚Iterator æ˜¯å¯¹é›†åˆçš„å°è£…ï¼Œç”¨é›†åˆæœ¬èº«çš„ç´¢å¼•åŽ»è¿­ä»£æ¯ä¸€ä¸ªå…ƒç´ ã€‚ è¿™é‡Œè®²çš„æ¯”è¾ƒç®€å•ï¼Œå¯ç™¾åº¦ï¼Œå¾…è¡¥å……ã€‚ (TO BE ENHANCEMENT)

